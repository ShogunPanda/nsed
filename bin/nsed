#!/usr/bin/env node

const { execute } = require('../lib')

function failureHandler(error) {
  let message = error

  if (error.code === 'ENSED') {
    message = error.message
  }

  console.error(message)
  process.exit(1)
}

process.on('unhandledRejection', failureHandler)
process.on('uncaughtException', failureHandler)

execute(process.argv).catch(failureHandler)
